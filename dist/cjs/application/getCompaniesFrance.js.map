{
  "version": 3,
  "sources": ["../../esm/application/getCompaniesFrance.js"],
  "sourcesContent": ["import getCompaniesFranceFromINSEEApi from \"../infrastructure/getCompaniesFranceFromINSEEApi.js\";\nimport getINSEEApiAccessToken from \"../application/getINSEEApiAccessToken.js\";\nimport getQuery from \"./getQuery.js\";\nimport renewINSEEApiAccessToken from \"../application/renewINSEEApiAccessToken.js\";\nexport default async function getCompaniesFrance(query) {\n    const INSEE_API_KEY = await getINSEEApiAccessToken();\n    const buildQuery = getQuery(query);\n    let response = await getCompaniesFranceFromINSEEApi(buildQuery, INSEE_API_KEY);\n    if (response.status === 401) {\n        await renewINSEEApiAccessToken();\n        const INSEE_API_KEY = await getINSEEApiAccessToken();\n        response = await getCompaniesFranceFromINSEEApi(buildQuery, INSEE_API_KEY);\n    }\n    const data = (await response.json());\n    let companies = [];\n    if (response.status === 404) {\n        return companies;\n    }\n    companies = data.etablissements.map((company) => {\n        return {\n            code: company.siret,\n            name: company.uniteLegale.denominationUniteLegale,\n            address: `${company.adresseEtablissement.numeroVoieEtablissement} ${company.adresseEtablissement.typeVoieEtablissement} ${company.adresseEtablissement.libelleVoieEtablissement}, ${company.adresseEtablissement.codePostalEtablissement} ${company.adresseEtablissement.libelleCommuneEtablissement}`,\n        };\n    });\n    return companies;\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4CAA2C;AAC3C,oCAAmC;AACnC,sBAAqB;AACrB,sCAAqC;AACrC,eAAO,mBAA0C,OAAO;AACpD,QAAM,gBAAgB,UAAM,8BAAAA,SAAuB;AACnD,QAAM,iBAAa,gBAAAC,SAAS,KAAK;AACjC,MAAI,WAAW,UAAM,sCAAAC,SAA+B,YAAY,aAAa;AAC7E,MAAI,SAAS,WAAW,KAAK;AACzB,cAAM,gCAAAC,SAAyB;AAC/B,UAAMC,iBAAgB,UAAM,8BAAAJ,SAAuB;AACnD,eAAW,UAAM,sCAAAE,SAA+B,YAAYE,cAAa;AAAA,EAC7E;AACA,QAAM,OAAQ,MAAM,SAAS,KAAK;AAClC,MAAI,YAAY,CAAC;AACjB,MAAI,SAAS,WAAW,KAAK;AACzB,WAAO;AAAA,EACX;AACA,cAAY,KAAK,eAAe,IAAI,CAAC,YAAY;AAC7C,WAAO;AAAA,MACH,MAAM,QAAQ;AAAA,MACd,MAAM,QAAQ,YAAY;AAAA,MAC1B,SAAS,GAAG,QAAQ,qBAAqB,2BAA2B,QAAQ,qBAAqB,yBAAyB,QAAQ,qBAAqB,6BAA6B,QAAQ,qBAAqB,2BAA2B,QAAQ,qBAAqB;AAAA,IAC7Q;AAAA,EACJ,CAAC;AACD,SAAO;AACX;",
  "names": ["getINSEEApiAccessToken", "getQuery", "getCompaniesFranceFromINSEEApi", "renewINSEEApiAccessToken", "INSEE_API_KEY"]
}
